<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<!-- EPubBuilder.js Dependencies -->
<script src="libs/handlebars/handlebars.runtime.js"></script>
<script src="libs/zip.js/WebContent/zip.js"></script>
<script src="libs/zip.js/WebContent/zip-fs.js"></script>
<script src="libs/zip.js/WebContent/deflate-blob.js"></script>
<script src="libs/rsvp/rsvp.js"></script>
<script src="templates.js"></script>
<!-- Dependencies End -->
<script src="EPubBuilder.js"></script>

<script>
	/* jshint indent:false */
	/* global Book */

	// TODO: Add true benchmarking http://benchmarkjs.com/
	/*function sendToServer(time){
		var xhr = new XMLHttpRequest();
		xhr.open('POST','http://localhost:1338');
		xhr.onload = function(){
			if(Boolean(this.response)){
				window.location.reload();
			}	
		};
		xhr.send(time);
	};*/
	var book;

	function init(){
		window.performance.mark("startBook");
		//console.profile("newBook");

		book = new Book({
			title:"Finding Nemo",
			author:"Nemo's Father",
		});

		book.addChapter("Hello");

		book.exportBlob(function(error,blob){
			//console.profileEnd("newBook");
			window.performance.mark("endBook");
			window.performance.measure("totalBook","startBook","endBook");

			console.log(window.URL.createObjectURL(blob));
			console.log(window.performance.getEntriesByName("totalBook")[0]);
		});
	}

	window.onload = init();
</script>
</body>
</html>